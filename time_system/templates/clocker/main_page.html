
<html>

    <head>

        <link rel="stylesheet" type="text/css" href="/static/clocker/js/css/redmond/jquery-ui-1.8.18.custom.css"/>
        <link rel="stylesheet" type="text/css" href="/static/clocker/main_page.css"/>
        <script src="/static/clocker/js/js/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="/static/clocker/js/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>

        <style>
            #ui-datepicker-div { font-size: 12px; }
        </style>
        
        <script>
            $(document).ready(function() 
            {
                var dates = $( "#from, #to" ).datepicker(
                {
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    dateFormat: 'yy-mm-dd',
                    onSelect: function( selectedDate ) 
                    {
                        var option = this.id == "from" ? "minDate" : "maxDate",
                        instance = $( this ).data( "datepicker" ),
                        date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                        dates.not( this ).datepicker( "option", option, date );
                    }
                });
            });
        </script>

    </head>

    <body> 

        <div id="content">

            <div>
                {% if user.first_name %}
                    Hello {{user.first_name}} {{user.last_name}} (<a href="/logout/">logout</a>)
                {% endif %}
            </div>

            <div align="left">
                <form name="admin" action="hours/" method="post">
                    {% csrf_token %}

                    <table border="1">

                        <tr>
                            <th colspan="2">View Hours(Admin)</th>
                        </tr>

                        <tr>
                            <th>From </th>
                            <th> <input type="text" id="from" name="from"/> </th>
                        </tr>

                        <tr>
                            <th>To</th>
                            <th> <input type="text" id="to" name="to"/>  </th>
                        </tr>

                        <tr>
                            <th>Employee</th>
                            <th> 

                                <select name="user_name">
                                    {% if is_admin %}
                                        {% for emp in employee %}
                                        <option value="{{emp.user.username}}">{{emp}}</option>
                                        {% endfor %}
                                    {% else %}
                                        <option value="{{user.username}}">{{user.username}}</option>
                                    {% endif %}
                                </select> 
                            </th>
                        </tr>

                        <tr>
                            <th colspan="2"> <input type="submit" value="submit" name="submit"></th>
                        </tr>

                    </table>

                </form>
            </div>
        
            <div class="login">

                <div>
                    &nbsp;
                    <form name="main_page" method="post">
                        {% csrf_token %}
 
                        <div class="radio_buttons">
                            {% ifequal user_status "out" %}
                                <input type="radio" name="status" value="In" checked="checked"/> Clock In<br />
                                <input type="radio" name="status" value="Out" disabled="disabled"/> Clock Out
                            {% else %}
                                <input type="radio" name="status" value="In" disabled="disabled"/> Clock In<br />
                                <input type="radio" name="status" value="Out" checked="checked"/> Clock Out
                            {% endifequal %}
                        </div>
                        
                        <input type="submit" value="submit" class="submit_clock">

                    </form>

                </div>

                <div class="message">

                    {% ifequal error "none" %}

                        {% ifequal status "out" %}  
                            You have clocked out succesfully. <br />
                        {% endifequal %}

                        {% ifequal status "in" %}
                            Your have clocked in succesfully.
                        {% endifequal %}
                            
                        {% ifequal status "none" %}  
                            {% ifequal user_status "in" %}  
                                <!-- TODO: if user is still clocked in show how long they've been clocked in for-->
                            {% endifequal %}
                        {% endifequal %}

                    {% else %}

                        {% ifequal error "exception" %}
                            An unexpected error occured.  Maybe try logging out and then back in.
                        {% endifequal %}

                        {% ifequal error "out" %}
                            You are not able to clock out right now. Please clock in first.
                        {% endifequal %}

                        {% ifequal error "in" %}
                            You are not able to clock in right now. Please clock out first.
                        {% endifequal %}

                    {% endifequal %}

                </div> <!--End message-->

            </div> <!--End login-->

        </div> <!--End content-->

    </body>

</html>
